# FastAPIç±»

## ä¸€ã€FastAPI ç±»ç›®å½•

### 1. å±æ€§ (Attributes)

- **openapi_version**
  
  - OpenAPI ç‰ˆæœ¬ï¼Œè¡¨ç¤ºç”Ÿæˆçš„ API æ–‡æ¡£æ‰€ä½¿ç”¨çš„ OpenAPI è§„èŒƒçš„ç‰ˆæœ¬ã€‚

- **webhooks**
  
  - åŒ…å«å®šä¹‰çš„ Webhook è·¯ç”±ï¼Œé€šå¸¸ç”¨äºå¤„ç†ç¬¬ä¸‰æ–¹æœåŠ¡çš„å›è°ƒè¯·æ±‚ã€‚

- **state**
  
  - ç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºçš„å…±äº«çŠ¶æ€ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡ `app.state` è®¿é—®å’Œç®¡ç†è‡ªå®šä¹‰æ•°æ®ã€‚

- **dependency_overrides**
  
  - ç”¨äºè¦†ç›–é»˜è®¤çš„ä¾èµ–å…³ç³»æ³¨å…¥ï¼Œå…è®¸åœ¨æµ‹è¯•æˆ–è¿è¡Œæ—¶æä¾›ä¸åŒçš„ä¾èµ–å®ç°ã€‚

### 2. æ–¹æ³• (Methods)

- **openapi**
  
  - ç”Ÿæˆå¹¶è¿”å›å½“å‰åº”ç”¨ç¨‹åºçš„ OpenAPI è§„èŒƒæ–‡æ¡£ã€‚

- **websocket**
  
  - å®šä¹‰ WebSocket è·¯ç”±ï¼Œç”¨äºå¤„ç† WebSocket è¿æ¥ã€‚

- **include_router**
  
  - åŒ…å«ä¸€ä¸ªå­è·¯ç”±å™¨ï¼Œå¯ä»¥å°†å¤šä¸ªè·¯ç”±å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æ¨¡å—åŒ–çš„æ–¹å¼ç»„ç»‡ä»£ç ã€‚

- **get**
  
  - å®šä¹‰ä¸€ä¸ª HTTP GET è¯·æ±‚è·¯ç”±ï¼Œç”¨äºè·å–èµ„æºã€‚

- **put**
  
  - å®šä¹‰ä¸€ä¸ª HTTP PUT è¯·æ±‚è·¯ç”±ï¼Œç”¨äºæ›´æ–°èµ„æºã€‚

- **post**
  
  - å®šä¹‰ä¸€ä¸ª HTTP POST è¯·æ±‚è·¯ç”±ï¼Œç”¨äºåˆ›å»ºæ–°èµ„æºã€‚

- **delete**
  
  - å®šä¹‰ä¸€ä¸ª HTTP DELETE è¯·æ±‚è·¯ç”±ï¼Œç”¨äºåˆ é™¤èµ„æºã€‚

- **options**
  
  - å®šä¹‰ä¸€ä¸ª HTTP OPTIONS è¯·æ±‚è·¯ç”±ï¼Œç”¨äºè·å–å¯ç”¨çš„é€šä¿¡é€‰é¡¹ã€‚

- **head**
  
  - å®šä¹‰ä¸€ä¸ª HTTP HEAD è¯·æ±‚è·¯ç”±ï¼Œç”¨äºè·å–èµ„æºçš„å…ƒæ•°æ®ã€‚

- **patch**
  
  - å®šä¹‰ä¸€ä¸ª HTTP PATCH è¯·æ±‚è·¯ç”±ï¼Œç”¨äºéƒ¨åˆ†æ›´æ–°èµ„æºã€‚

- **trace**
  
  - å®šä¹‰ä¸€ä¸ª HTTP TRACE è¯·æ±‚è·¯ç”±ï¼Œç”¨äºå›æ˜¾æ”¶åˆ°çš„è¯·æ±‚ã€‚

- **on_event**
  
  - æ³¨å†Œäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚å¯åŠ¨å’Œå…³é—­äº‹ä»¶ã€‚å…è®¸åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚

- **middleware**
  
  - æ·»åŠ ä¸­é—´ä»¶ï¼Œç”¨äºåœ¨å¤„ç†è¯·æ±‚å’Œå“åº”æ—¶æ‰§è¡Œé¢å¤–çš„é€»è¾‘ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€èº«ä»½éªŒè¯ç­‰ã€‚

- **exception_handler**
  
  - æ³¨å†Œå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œç”¨äºè‡ªå®šä¹‰å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚

## äºŒã€ç”¨æ³•è¯´æ˜

### 1. getã€postã€deleteã€optionsã€headã€patchã€trace

##### 1.1 get

- **`response_model`**: æŒ‡å®šäº†å“åº”æ¨¡å‹ä¸º `Item`ï¼Œè¿™æ„å‘³ç€è¿”å›çš„æ•°æ®å°†ä¼šè¢«éªŒè¯ä¸º `Item` ç±»å‹ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨ç”Ÿæˆ JSON å“åº”ã€‚

- **`status_code`**: æŒ‡å®šæˆåŠŸå“åº”çš„çŠ¶æ€ç ä¸º 200ã€‚

- **`tags`**: ç”¨äºæ ‡è®°æ­¤è·¯ç”±çš„ç±»åˆ«ï¼Œæ–¹ä¾¿åœ¨è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£ä¸­è¿›è¡Œåˆ†ç»„ã€‚

- **`dependencies`**: `Depends` ç”¨äºä¾èµ–æ³¨å…¥ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ`verify_token` ç”¨äºéªŒè¯è¯·æ±‚ä¸­çš„ tokenã€‚

- **`summary`** å’Œ **`description`**: ç”¨äºåœ¨è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ä¸­æä¾›ç®€è¦è¯´æ˜å’Œè¯¦ç»†æè¿°ã€‚

- **`response_description`**: ç”¨äºæè¿°æˆåŠŸå“åº”çš„å†…å®¹ã€‚

- **`responses`**: è‡ªå®šä¹‰å…¶ä»–HTTPå“åº”ï¼Œä¾‹å¦‚ 404 çš„æƒ…å†µã€‚

- **`deprecated`**: è®¾ç½®ä¸º `True` æ—¶ï¼Œè¿™ä¸ªAPIä¼šè¢«æ ‡è®°ä¸ºåºŸå¼ƒçš„ã€‚

- ä¾‹å­

```python
from fastapi import FastAPI, Depends, HTTPException, status
from pydantic import BaseModel
from typing import Optional, List
from fastapi.responses import JSONResponse

app = FastAPI()

# å®šä¹‰ä¸€ä¸ªPydanticæ¨¡å‹ï¼Œç”¨äºå“åº”æ•°æ®çš„ç»“æ„åŒ–
class Item(BaseModel):
    name: str
    description: Optional[str] = None
    price: float
    tax: Optional[float] = None

# æ¨¡æ‹Ÿä¸€ä¸ªä¾èµ–é¡¹ï¼Œç”¨äºæ¼”ç¤ºä¾èµ–æ³¨å…¥åŠŸèƒ½
def verify_token(token: str):
    if token != "fake-super-secret-token":
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid token"
        )

# ä½¿ç”¨getè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªGETè¯·æ±‚çš„è·¯ç”±
@app.get(
    "/items/{item_id}",  # è·¯å¾„å‚æ•°
    response_model=Item,  # å“åº”æ¨¡å‹
    status_code=200,  # è‡ªå®šä¹‰çŠ¶æ€ç 
    tags=["items"],  # æ ‡ç­¾ï¼Œç”¨äºåœ¨è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ä¸­åˆ†ç»„
    dependencies=[Depends(verify_token)],  # ä¾èµ–é¡¹
    summary="Get an item by ID",  # æ¦‚è¦è¯´æ˜
    description="é€šè¿‡æä¾›çš„IDè·å–ç‰¹å®šçš„å•†å“ä¿¡æ¯",  # è¯¦ç»†æè¿°
    response_description="è¿”å›çš„å•†å“æ•°æ®",  # å“åº”æè¿°
    responses={404: {"description": "Item not found"}},  # è‡ªå®šä¹‰å“åº”
    deprecated=False  # æ ‡è®°ä¸ºåºŸå¼ƒçš„API
)
async def read_item(item_id: int, q: Optional[str] = None):
    """
    è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨APIæ–‡æ¡£ä¸­ã€‚

    - **item_id**: å•†å“çš„å”¯ä¸€æ ‡è¯†ç¬¦
    - **q**: å¯é€‰æŸ¥è¯¢å‚æ•°
    """
    # æ¨¡æ‹Ÿä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢
    fake_items_db = {1: {"name": "Item One", "price": 10.0, "description": "This is item one"}}

    item = fake_items_db.get(item_id)
    if item:
        if q:
            item.update({"q": q})
        return item
    else:
        raise HTTPException(status_code=404, detail="Item not found")

# å¯åŠ¨åº”ç”¨æ—¶å¯ä»¥ä½¿ç”¨uvicornæ¥è¿è¡Œï¼Œæ¯”å¦‚ï¼šuvicorn main:app --reload
```

#### 1.2 post

- ä¾‹å­

```python
from fastapi import FastAPI, Depends, HTTPException, status
from pydantic import BaseModel
from typing import Optional, List
from fastapi.responses import JSONResponse

app = FastAPI()

# å®šä¹‰ä¸€ä¸ªPydanticæ¨¡å‹ï¼Œç”¨äºè¯·æ±‚æ•°æ®çš„ç»“æ„åŒ–
class Item(BaseModel):
    name: str
    description: Optional[str] = None
    price: float
    tax: Optional[float] = None

# æ¨¡æ‹Ÿä¸€ä¸ªä¾èµ–é¡¹ï¼Œç”¨äºæ¼”ç¤ºä¾èµ–æ³¨å…¥åŠŸèƒ½
def verify_token(token: str):
    if token != "fake-super-secret-token":
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid token"
        )

# ä½¿ç”¨postè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªPOSTè¯·æ±‚çš„è·¯ç”±
@app.post(
    "/items/",  # è·¯å¾„
    response_model=Item,  # å“åº”æ¨¡å‹
    status_code=status.HTTP_201_CREATED,  # è‡ªå®šä¹‰çŠ¶æ€ç 
    tags=["items"],  # æ ‡ç­¾ï¼Œç”¨äºåœ¨è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ä¸­åˆ†ç»„
    dependencies=[Depends(verify_token)],  # ä¾èµ–é¡¹
    summary="Create a new item",  # æ¦‚è¦è¯´æ˜
    description="é€šè¿‡æä¾›çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„å•†å“",  # è¯¦ç»†æè¿°
    response_description="æˆåŠŸåˆ›å»ºåçš„å•†å“æ•°æ®",  # å“åº”æè¿°
    responses={400: {"description": "Bad Request"}},  # è‡ªå®šä¹‰å“åº”
    deprecated=False  # æ ‡è®°ä¸ºåºŸå¼ƒçš„API
)
async def create_item(item: Item):
    """
    è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨APIæ–‡æ¡£ä¸­ã€‚

    - **item**: åŒ…å«å•†å“çš„åç§°ã€æè¿°ã€ä»·æ ¼å’Œç¨ç‡ç­‰ä¿¡æ¯
    """
    # æ¨¡æ‹Ÿåˆ›å»ºä¸€ä¸ªå•†å“
    created_item = item.dict()
    created_item["id"] = 1  # å‡è®¾å•†å“IDæ˜¯1
    return created_item

# å¯åŠ¨åº”ç”¨æ—¶å¯ä»¥ä½¿ç”¨uvicornæ¥è¿è¡Œï¼Œæ¯”å¦‚ï¼šuvicorn main:app --reload
```

### 0. FastAPI ç±»

#### 0.1. ä¸»è¦å‚æ•°è¯´æ˜

- **debug**ï¼šåœ¨æœåŠ¡å™¨é”™è¯¯æ—¶æ˜¯å¦è¿”å›è°ƒè¯•è·Ÿè¸ªä¿¡æ¯ã€‚
  
  - ç±»å‹ï¼š`bool`
  - é»˜è®¤å€¼ï¼š`False`

- **routes**ï¼šè·¯ç”±åˆ—è¡¨ï¼Œé€šå¸¸ä¸åœ¨ FastAPI ä¸­ä½¿ç”¨ï¼Œå®ƒä» Starlette ç»§æ‰¿ä»¥æ”¯æŒå…¼å®¹æ€§ã€‚
  
  - ç±»å‹ï¼š`Optional[List[BaseRoute]]`
  - é»˜è®¤å€¼ï¼š`None`

- **title**ï¼šAPI çš„æ ‡é¢˜ï¼Œå°†æ·»åŠ åˆ°ç”Ÿæˆçš„ OpenAPI ä¸­ï¼ˆåœ¨ `/docs` å¯è§ï¼‰ã€‚
  
  - ç±»å‹ï¼š`str`
  - é»˜è®¤å€¼ï¼š`'FastAPI'`

- **summary**ï¼šAPI çš„ç®€çŸ­æ‘˜è¦ï¼Œå°†æ·»åŠ åˆ°ç”Ÿæˆçš„ OpenAPI ä¸­ï¼ˆåœ¨ `/docs` å¯è§ï¼‰ã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`None`

- **description**ï¼šAPI çš„æè¿°ï¼Œæ”¯æŒ Markdownï¼ˆä½¿ç”¨ CommonMark è¯­æ³•ï¼‰ï¼Œå°†æ·»åŠ åˆ°ç”Ÿæˆçš„ OpenAPI ä¸­ï¼ˆåœ¨ `/docs` å¯è§ï¼‰ã€‚
  
  - ç±»å‹ï¼š`str`
  - é»˜è®¤å€¼ï¼š`''`

- **version**ï¼šAPI çš„ç‰ˆæœ¬ï¼Œå°†æ·»åŠ åˆ°ç”Ÿæˆçš„ OpenAPI ä¸­ï¼ˆåœ¨ `/docs` å¯è§ï¼‰ã€‚
  
  - ç±»å‹ï¼š`str`
  - é»˜è®¤å€¼ï¼š`'0.1.0'`

- **openapi_url**ï¼šå…¬å¼€ OpenAPI æ¶æ„çš„ URLã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`'/openapi.json'`

- **openapi_tags**ï¼šOpenAPI ä½¿ç”¨çš„æ ‡ç­¾åˆ—è¡¨ï¼Œé¡ºåºå¯ç”¨äºæŒ‡å®šåœ¨å·¥å…·ä¸­æ˜¾ç¤ºçš„é¡ºåºã€‚
  
  - ç±»å‹ï¼š`Optional[List[Dict[str, Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **servers**ï¼šç›®æ ‡æœåŠ¡å™¨çš„è¿æ¥ä¿¡æ¯åˆ—è¡¨ï¼Œç”¨äºæŒ‡å®šä¸åŒç¯å¢ƒçš„æœåŠ¡å™¨ã€‚
  
  - ç±»å‹ï¼š`Optional[List[Dict[str, Union[str, Any]]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **dependencies**ï¼šå…¨å±€ä¾èµ–åˆ—è¡¨ï¼Œå°†åº”ç”¨äºæ¯ä¸ªè·¯å¾„æ“ä½œï¼ŒåŒ…æ‹¬å­è·¯ç”±ã€‚
  
  - ç±»å‹ï¼š`Optional[Sequence[Depends]]`
  - é»˜è®¤å€¼ï¼š`None`

- **default_response_class**ï¼šé»˜è®¤å“åº”ç±»ã€‚
  
  - ç±»å‹ï¼š`Type[Response]`
  - é»˜è®¤å€¼ï¼š`Default(JSONResponse)`

- **redirect_slashes**ï¼šæ˜¯å¦æ£€æµ‹å¹¶é‡å®šå‘ URL ä¸­çš„æ–œæ ã€‚
  
  - ç±»å‹ï¼š`bool`
  - é»˜è®¤å€¼ï¼š`True`

- **docs_url**ï¼šè‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º `/docs`ã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`'/docs'`

- **redoc_url**ï¼šç”± ReDoc æä¾›çš„æ›¿ä»£è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º `/redoc`ã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`'/redoc'`

- **swagger_ui_oauth2_redirect_url**ï¼šSwagger UI çš„ OAuth2 é‡å®šå‘ç«¯ç‚¹ï¼Œé»˜è®¤æ˜¯ `/docs/oauth2-redirect`ã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`'/docs/oauth2-redirect'`

- **swagger_ui_init_oauth**ï¼šSwagger UI çš„ OAuth2 é…ç½®ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[str, Any]]`
  - é»˜è®¤å€¼ï¼š`None`

- **middleware**ï¼šä¸­é—´ä»¶åˆ—è¡¨ã€‚
  
  - ç±»å‹ï¼š`Optional[Sequence[Middleware]]`
  - é»˜è®¤å€¼ï¼š`None`

- **exception_handlers**ï¼šå¼‚å¸¸å¤„ç†ç¨‹åºçš„å­—å…¸ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[Union[int, Type[Exception]], Callable[[Request, Any], Coroutine[Any, Any, Response]]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **on_startup**ï¼šå¯åŠ¨äº‹ä»¶å¤„ç†å‡½æ•°åˆ—è¡¨ã€‚
  
  - ç±»å‹ï¼š`Optional[Sequence[Callable[[], Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **on_shutdown**ï¼šå…³æœºäº‹ä»¶å¤„ç†å‡½æ•°åˆ—è¡¨ã€‚
  
  - ç±»å‹ï¼š`Optional[Sequence[Callable[[], Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **lifespan**ï¼šç”Ÿå‘½å‘¨æœŸä¸Šä¸‹æ–‡ç®¡ç†å¤„ç†ç¨‹åºï¼Œæ›¿ä»£å¯åŠ¨å’Œå…³æœºå‡½æ•°ã€‚
  
  - ç±»å‹ï¼š`Optional[Lifespan[AppType]]`
  - é»˜è®¤å€¼ï¼š`None`

- **terms_of_service**ï¼šæœåŠ¡æ¡æ¬¾çš„ URLã€‚
  
  - ç±»å‹ï¼š`Optional[str]`
  - é»˜è®¤å€¼ï¼š`None`

- **contact**ï¼šAPI çš„è”ç³»ä¿¡æ¯å­—å…¸ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[str, Union[str, Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **license_info**ï¼šAPI çš„è®¸å¯è¯ä¿¡æ¯å­—å…¸ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[str, Union[str, Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **openapi_prefix**ï¼šOpenAPI URL çš„å‰ç¼€ï¼Œå·²å¼ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨ `root_path`ã€‚
  
  - ç±»å‹ï¼š`str`
  - é»˜è®¤å€¼ï¼š`''`

- **root_path**ï¼šç”±ä»£ç†å¤„ç†çš„è·¯å¾„å‰ç¼€ï¼Œä¸ä¼šåœ¨åº”ç”¨ç¨‹åºä¸­çœ‹åˆ°ï¼Œä½†å¤–éƒ¨å®¢æˆ·ç«¯ä¼šçœ‹åˆ°ï¼Œå½±å“å¦‚ Swagger UIã€‚
  
  - ç±»å‹ï¼š`str`
  - é»˜è®¤å€¼ï¼š`''`

- **root_path_in_servers**ï¼šæ˜¯å¦è‡ªåŠ¨ç”Ÿæˆå¸¦æœ‰ `root_path` çš„æœåŠ¡å™¨ URLã€‚
  
  - ç±»å‹ï¼š`bool`
  - é»˜è®¤å€¼ï¼š`True`

- **responses**ï¼šåœ¨ OpenAPI ä¸­æ˜¾ç¤ºçš„é¢å¤–å“åº”ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[Union[int, str], Dict[str, Any]]]`
  - é»˜è®¤å€¼ï¼š`None`

- **callbacks**ï¼šåº”é€‚ç”¨äºæ‰€æœ‰è·¯å¾„æ“ä½œçš„ OpenAPI å›è°ƒã€‚
  
  - ç±»å‹ï¼š`Optional[List[BaseRoute]]`
  - é»˜è®¤å€¼ï¼š`None`

- **webhooks**ï¼šæ·»åŠ  OpenAPI webhooksï¼Œä¸å›è°ƒç±»ä¼¼ï¼Œä½†ä¸ä¾èµ–äºç‰¹å®šè·¯å¾„æ“ä½œã€‚
  
  - ç±»å‹ï¼š`Optional[APIRouter]`
  - é»˜è®¤å€¼ï¼š`None`

- **deprecated**ï¼šå°†æ‰€æœ‰è·¯å¾„æ“ä½œæ ‡è®°ä¸ºå·²å¼ƒç”¨ã€‚
  
  - ç±»å‹ï¼š`Optional[bool]`
  - é»˜è®¤å€¼ï¼š`None`

- **include_in_schema**ï¼šæ˜¯å¦åœ¨ç”Ÿæˆçš„ OpenAPI ä¸­åŒ…å«æ‰€æœ‰è·¯å¾„æ“ä½œã€‚
  
  - ç±»å‹ï¼š`bool`
  - é»˜è®¤å€¼ï¼š`True`

- **swagger_ui_parameters**ï¼šé…ç½® Swagger UI çš„å‚æ•°ã€‚
  
  - ç±»å‹ï¼š`Optional[Dict[str, Any]]`
  - é»˜è®¤å€¼ï¼š`None`

- **generate_unique_id_function**ï¼šè‡ªå®šä¹‰ç”Ÿæˆè·¯å¾„æ“ä½œå”¯ä¸€ ID çš„å‡½æ•°ã€‚
  
  - ç±»å‹ï¼š`Callable[[APIRoute], str]`
  - é»˜è®¤å€¼ï¼š`Default(generate_unique_id)`

- **separate_input_output_schemas**ï¼šæ˜¯å¦ä¸ºè¯·æ±‚ä½“å’Œå“åº”ä½“ç”Ÿæˆå•ç‹¬çš„ OpenAPI æ¶æ„ã€‚
  
  - ç±»å‹ï¼š`bool`
  - é»˜è®¤å€¼ï¼š`True`

- **extra**ï¼šå­˜å‚¨åœ¨åº”ç”¨ç¨‹åºä¸­çš„é¢å¤–å…³é”®å­—å‚æ•°ï¼Œä¸åœ¨ FastAPI ä¸­ä½¿ç”¨ã€‚
  
  - ç±»å‹ï¼š`Any`
  - é»˜è®¤å€¼ï¼š`{}`

#### 0.2. ç¤ºä¾‹ä»£ç 

```python
from fastapi import FastAPI, Depends
from fastapi.responses import ORJSONResponse

def func_dep_1():
    # Dependency function 1
    pass

def func_dep_2():
    # Dependency function 2
    pass

app = FastAPI(
    title="ChimichangApp",
    summary="Deadpool's favorite app. Nuff said.",
    description="""
                ChimichangApp API helps you do awesome stuff. ğŸš€

                ## Items

                You can **read items**.

                ## Users

                You will be able to:

                * **Create users** (_not implemented_).
                * **Read users** (_not implemented_).
                """,
    version="0.0.1",
    openapi_url="/api/v1/openapi.json",
    openapi_tags=[
        {
            "name": "users",
            "description": "Operations with users. The **login** logic is also here.",
        },
        {
            "name": "items",
            "description": "Manage items. So _fancy_ they have their own docs.",
            "externalDocs": {
                "description": "Items external docs",
                "url": "https://fastapi.tiangolo.com/",
            },
        },
    ],
    servers=[
        {"url": "https://stag.example.com", "description": "Staging environment"},
        {"url": "https://prod.example.com", "description": "Production environment"},
    ],
    dependencies=[Depends(func_dep_1), Depends(func_dep_2)],
    default_response_class=ORJSONResponse,
    redirect_slashes=True,
    docs_url="/documentation",
    redoc_url="/redocumentation",
    swagger_ui_oauth2_redirect_url="/documentation/oauth2-redirect",
    swagger_ui_init_oauth={"clientId": "your-client-id", "appName": "ChimichangApp"}
)

@app.get("/items/", tags=["items"])
async def read_items():
    return [{"item_id": "Foo"}]

@app.get("/users/", tags=["users"])
async def read_users():
    return [{"user_id": "Deadpool"}]

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

## å‚è€ƒèµ„æ–™

https://fastapi.tiangolo.com/zh/reference/fastapi/#fastapi.FastAPI--example
